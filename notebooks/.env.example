# Azure & Fabric Environment Variables
# Copy this file to .env and fill in your actual values
# Fabric Runtime: 1.3

# ================================
# Azure AD App Registration (Required)
# ================================
FABRIC_TENANT_ID=your-tenant-id-here
FABRIC_APP_ID=your-app-id-here
FABRIC_APP_SECRET=your-app-secret-here
FABRIC_LAKEHOUSE_ID=your-lakehouse-id-here

# ================================
# Azure Subscription & Resources
# ================================
AZURE_TENANT_ID=your-tenant-id-here
AZURE_SUBSCRIPTION_ID=your-subscription-id-here
AZURE_RESOURCE_GROUP=your-resource-group-name

# ================================
# Fabric Workspace Configuration
# ================================
FABRIC_WORKSPACE_ID=your-workspace-id-here
FABRIC_WORKSPACE_NAME=YourWorkspaceName
FABRIC_RUNTIME_VERSION=1.3

# Capacity IDs (comma-separated for monitoring multiple capacities)
# FABRIC_CAPACITY_IDS=capacity-guid-1,capacity-guid-2

# ================================
# Azure Monitor Ingestion Configuration
# ================================
# Get these values from Terraform outputs: terraform output -json

# Data Collection Endpoint (DCE) - Full URL
AZURE_MONITOR_DCE_ENDPOINT=https://dce-fabric-monitoring-xxxx.region-1.ingest.monitor.azure.com

# Data Collection Rule (DCR) - Immutable ID
AZURE_MONITOR_DCR_IMMUTABLE_ID=dcr-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Log Analytics Workspace
LOG_ANALYTICS_WORKSPACE_ID=your-workspace-id-here
LOG_ANALYTICS_WORKSPACE_NAME=law-fabric-monitoring
LOG_ANALYTICS_RESOURCE_GROUP=rg-fabric-monitoring

# ================================
# Key Vault Configuration (Optional)
# ================================
AZURE_KEY_VAULT_URI=https://your-keyvault-name.vault.azure.net/
AZURE_KEY_VAULT_SECRET_NAME=FabricServicePrincipal

# ================================
# Collection Configuration (Optional)
# ================================
# Override default collection settings
FABRIC_LOOKBACK_HOURS=24
FABRIC_COLLECT_ACTIVITY_RUNS=true
FABRIC_METRICS_INTERVAL_MINUTES=15

# ================================
# Development & Debugging (Optional)
# ================================
DEBUG_MODE=false
VERBOSE_LOGGING=false

# ================================
# Stream Names (must match DCR configuration)
# ================================
AZURE_MONITOR_STREAM_LIVY_SESSION=Custom-FabricSparkLivySession_CL
AZURE_MONITOR_STREAM_SPARK_LOGS=Custom-FabricSparkLogs_CL
AZURE_MONITOR_STREAM_HISTORY_METRICS=Custom-FabricSparkHistoryMetrics_CL
AZURE_MONITOR_STREAM_RESOURCE_USAGE=Custom-FabricSparkResourceUsage_CL

# ================================
# Quick Setup Instructions
# ================================
# 1. Deploy infrastructure:
#    cd infra/terraform
#    terraform apply
#
# 2. Get Terraform outputs:
#    terraform output -json
#
# 3. Copy this file to .env and fill in your actual values:
#    cp .env.example .env
#
# 4. Update .env with values from Terraform outputs:
#    - AZURE_MONITOR_DCE_ENDPOINT
#    - AZURE_MONITOR_DCR_IMMUTABLE_ID
#    - LOG_ANALYTICS_WORKSPACE_ID
#    - LOG_ANALYTICS_WORKSPACE_NAME
#    - AZURE_TENANT_ID
#    - AZURE_SUBSCRIPTION_ID
#
# 5. Add your Fabric credentials:
#    - FABRIC_TENANT_ID
#    - FABRIC_APP_ID (Service Principal)
#    - FABRIC_APP_SECRET (Service Principal Secret)
#    - FABRIC_WORKSPACE_ID
#    - FABRIC_LAKEHOUSE_ID
#
# 6. Authenticate with Azure:
#    az login
#
# 7. Test the configuration:
#    Open validate_environment.ipynb and run all cells
